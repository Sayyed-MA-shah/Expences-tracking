{% extends 'base.html' %}
{% block title %}Daily Expenses - WINSIDE{% endblock %}

{% block content %}
<h1 class="text-2xl font-semibold mb-6">Daily Expenses</h1>

<!-- ===== Summary Cards ===== -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
  <div class="bg-white shadow rounded-xl p-6 text-center">
    <h4 class="text-gray-500 text-sm font-medium">Total (All)</h4>
    <p class="text-2xl font-bold text-blue-600 mt-2">{{ total_all|floatformat:0 }}</p>
  </div>
  <div class="bg-white shadow rounded-xl p-6 text-center">
    <h4 class="text-gray-500 text-sm font-medium">Material</h4>
    <p class="text-2xl font-bold text-green-600 mt-2">{{ total_material|floatformat:0 }}</p>
  </div>
  <div class="bg-white shadow rounded-xl p-6 text-center">
    <h4 class="text-gray-500 text-sm font-medium">Rent/Bill/Guest</h4>
    <p class="text-2xl font-bold text-yellow-600 mt-2">{{ total_rbg|floatformat:0 }}</p>
  </div>
  <div class="bg-white shadow rounded-xl p-6 text-center">
    <h4 class="text-gray-500 text-sm font-medium">Setup Purchase</h4>
    <p class="text-2xl font-bold text-red-600 mt-2">{{ total_setup|floatformat:0 }}</p>
  </div>
</div>

<!-- ===== Filters + Add Button ===== -->
<div class="flex flex-wrap items-center justify-between mb-6 gap-4">
  <form method="get" class="flex flex-wrap items-end gap-4">
    <div>
      <label class="text-sm text-gray-600">From</label>
      <input type="date" name="start_date" value="{{ start_date|date:'Y-m-d' }}"
        class="border rounded-lg p-2 mt-1 block w-40 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200">
    </div>
    <div>
      <label class="text-sm text-gray-600">To</label>
      <input type="date" name="end_date" value="{{ end_date|date:'Y-m-d' }}"
        class="border rounded-lg p-2 mt-1 block w-40 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200">
    </div>
    <div>
      <label class="text-sm text-gray-600">Category</label>
      <select name="category"
        class="border rounded-lg p-2 mt-1 block w-48 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200">
        <option value="">-- All --</option>
        {% for code,label in categories %}
        <option value="{{ code }}" {% if category == code %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <button type="submit"
        class="px-5 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700">
        Apply Filter
      </button>
    </div>
    <hr><hr><hr>
    <a href="{% url 'expenses:report' %}"
   class="px-5 py-2 bg-purple-600 text-white rounded-lg shadow hover:bg-purple-700">
   ðŸ“„ Generate Report
</a>
  <a href="{% url 'expenses:bulk_add' %}"
    class="px-5 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700">
    + Add Expense
  </a>
  </form>
  
  <br>
  
</div>

<!-- ===== Table ===== -->
<div class="overflow-x-auto bg-white rounded-xl shadow">
  <table class="w-full border-collapse">
    <thead class="bg-gray-100 text-gray-600 text-sm">
      <tr>
        <th class="px-4 py-3 text-left">Date</th>
        <th class="px-4 py-3 text-left">Category</th>
        <th class="px-4 py-3 text-left">Description</th>
        <th class="px-4 py-3 text-right">Amount</th>
        <th class="px-4 py-3 text-center">Actions</th> 
      </tr>
    </thead>
    <tbody class="text-sm text-gray-700">
      {% for exp in expenses %}
      <tr class="border-t hover:bg-gray-50">
        <td class="px-4 py-2">{{ exp.date }}</td>
        <td class="px-4 py-2">{{ exp.get_category_display }}</td>
        <td class="px-4 py-2">{{ exp.description }}</td>
        <td class="px-4 py-2 text-right">{{ exp.amount }}</td>
         <td class="px-4 py-2 text-center">
      <a href="{% url 'expenses:delete' exp.id %}"
         class="px-3 py-1 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 text-sm">
         ðŸ—‘ 
      </a>
    </td>
    
   
  
      {% empty %}
      
      <tr>
        <td colspan="5" class="px-4 py-6 text-center text-gray-400">No expenses found</td>
      </tr>
      {% endfor %}
    </tbody>
    
  </table>
  
</div>

{% endblock %}
