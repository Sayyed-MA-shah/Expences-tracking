{% extends 'base.html' %}
{% block title %}Dashboard - WINSIDE{% endblock %}
{% block content %}
<h1 class="text-2xl font-semibold mb-4">Main Dashboard</h1>

<!-- ===== Monthly Stats ===== -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    <div class="bg-white shadow rounded-xl p-6 text-center">
        <h4 class="text-gray-500 text-sm font-medium">Pay-in (This Month)</h4>
        <p class="text-2xl font-bold text-green-600 mt-2">{{ payins_month|floatformat:0 }}</p>
    </div>
    <div class="bg-white shadow rounded-xl p-6 text-center">
        <h4 class="text-gray-500 text-sm font-medium">Pay-out (This Month)</h4>
        <p class="text-2xl font-bold text-red-600 mt-2">{{ payouts_month|floatformat:0 }}</p>
    </div>
    <div class="bg-white shadow rounded-xl p-6 text-center">
        <h4 class="text-gray-500 text-sm font-medium">Balance (This Month)</h4>
        <p class="text-2xl font-bold text-blue-600 mt-2">{{ balance_month|floatformat:0 }}</p>
    </div>
    <br>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
  <div class="bg-black shadow rounded-xl p-6 text-center">
    <h4 class="text-white text-sm font-medium">Total Paid Salaries</h4>
    <p class="text-2xl font-bold text-white mt-2">
      £{{ salary_total_all|floatformat:2 }}
    </p>
  </div>



  <div class="bg-white shadow rounded-xl p-6 text-center">
    <h4 class="text-gray-500 text-sm font-medium">Advances (Minus Balance)</h4>
    <p class="text-2xl font-bold text-red-600 mt-2">
      £{{ total_advances|floatformat:2 }}
    </p>
  </div>
</div>







<hr class="my-8 border-black">

<!-- ===== Custom Date Range Section ===== -->
<h3 class="text-lg font-semibold mb-4">Custom Date Range</h3>

<form method="get" class="flex flex-wrap items-center gap-4 mb-6">
    <div>
        <label for="start_date" class="block text-sm font-medium text-gray-700">From</label>
        <input type="date" name="start_date" id="start_date" value="{{ start_date|date:'Y-m-d' }}"
               class="border rounded-lg p-2 mt-1 block w-48 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200">
    </div>

    <div>
        <label for="end_date" class="block text-sm font-medium text-gray-700">To</label>
        <input type="date" name="end_date" id="end_date" value="{{ end_date|date:'Y-m-d' }}"
               class="border rounded-lg p-2 mt-2 block w-48 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200">
    </div>

    <div class="mt-7">
        <button type="submit"
                class="px-5 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700">
            Apply Filter
        </button>
    </div>
</form>

{% if payins_range is not None %}
<div class="grid grid-cols-1 md:grid-cols-4 gap-6">
    <div class="bg-gray-50 shadow rounded-xl p-6 text-center">
        <h4 class="text-gray-500 text-sm font-medium">Pay-in (Selected Range)</h4>
        <p class="text-2xl font-bold text-green-600 mt-2">{{ payins_range }}</p>
    </div>
    <div class="bg-gray-50 shadow rounded-xl p-6 text-center">
        <h4 class="text-gray-500 text-sm font-medium">Pay-out (Selected Range)</h4>
        <p class="text-2xl font-bold text-red-600 mt-2">{{ payouts_range }}</p>
    </div>
    <div class="bg-gray-50 shadow rounded-xl p-6 text-center">
        <h4 class="text-gray-500 text-sm font-medium">Balance (Selected Range)</h4>
        <p class="text-2xl font-bold text-blue-600 mt-2">{{ balance_range }}</p>
    </div>
    <div class="bg-gray-50 shadow rounded-xl p-6 text-center">
    <h4 class="text-gray-500 text-sm font-medium">Total Salary Paid (Selected Range)</h4>
    <p class="text-2xl font-bold text-purple-600 mt-2">
        {{ salary_paid_range }}
    </p>
</div>
</div>

    <a href="https://github.com/Sayyed-MA-shah" class="block bg-white p-4 rounded-xl shadow hover:shadow-md">
    developed by Sayyed M A Shah
  </a>

{% endif %}
{% endblock %}
