{% extends "base.html" %}
{% block content %}
<div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow">
  <form method="post" class="space-y-4">
    {% csrf_token %}
    <h2 class="text-xl font-semibold mb-4">ðŸ›  Record Daily Work for {{ employee.name }}</h2>

    <table class="w-full border rounded-lg" id="workTable">
      <thead class="bg-gray-100">
        <tr>
          <th class="p-2">Date</th>
          <th class="p-2">Item Detail</th>
          <th class="p-2">Quantity</th>
          <th class="p-2">Item Price (Â£)</th>
          <th class="p-2">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="p-2"><input type="date" name="date" value="{{ today }}" class="border p-2 rounded w-full"></td>
          <td class="p-2"><input type="text" name="description" placeholder="E.g. Window Frame" class="border p-2 rounded w-full"></td>
          <td class="p-2"><input type="number" name="quantity" class="border p-2 rounded w-full" required></td>
          <td class="p-2"><input type="number" step="0.01" name="item_price" class="border p-2 rounded w-full" required></td>
          <td class="p-2 text-center">
            <button type="button" onclick="removeRow(this)" class="px-3 py-1 bg-red-500 text-white rounded">âœ–</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="flex justify-between mt-4">
      <button type="button" onclick="addRow()" class="px-4 py-2 bg-blue-600 text-white rounded">âž• Add Row</button>
      <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded">âœ… Save Records</button>
    </div>
  </form>
</div>

<script>
function addRow() {
  const table = document.getElementById("workTable").getElementsByTagName("tbody")[0];
  const newRow = table.rows[0].cloneNode(true);

  // clear input values
  newRow.querySelectorAll("input").forEach(input => input.value = "");
  table.appendChild(newRow);
}

function removeRow(btn) {
  const row = btn.closest("tr");
  const table = document.getElementById("workTable").getElementsByTagName("tbody")[0];
  if (table.rows.length > 1) {
    row.remove();
  } else {
    alert("At least one row is required.");
  }
}
</script>
{% endblock %}
